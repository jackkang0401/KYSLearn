# 包瘦身

### 1. App Thinning

> 会专门针对不同的设备来选择只适用于当前设备的内容以供下载

#### 1.1 三种方式，包括：App Slicing、Bitcode、On-Demand Resources

* App Slicing：向 iTunes Connect 上传 App 后，对 App 做切割，创建不同的变体，这样就可以适用到不同的设备
* On-Demand Resources：为游戏多关卡场景服务的。它会根据用户的关卡进度下载随后几个关卡的资源，并且已经过关的资源也会被删掉，这样就可以减少初装 App 的包大小
* Bitcode：针对特定设备进行包大小优化，优化不明显


### 2.图片资源

#### 2.1 删除无用图片
  
#### 2.1.1 6 大步
 
 * 1. 通过 find 命令获取 App 安装包中的所有资源文件，比如 find /Users/daiming/Project/ -name
  * 2. 设置用到的资源的类型，比如 jpg、gif、png、webp
  * 3. 使用正则匹配在源码中找出使用到的资源名，比如 pattern = @"@"(.+?)""
  * 4. 使用 find 命令找到的所有资源文件，再去掉代码中使用到的资源文件，剩下的就是无用资源了
  * 5. 对于按照规则设置的资源名，我们需要在匹配使用资源的正则表达式里添加相应的规则，比如 @“image_%d”。确认无用资源后，就可以对这些无用资源执行删除操作了
  * 6. 这个删除操作，你可以使用 NSFileManger 系统类提供的功能来完成

#### 2.1.2 工具

* [LSUnusedResources](https://github.com/tinymind/LSUnusedResources)


